{% extends 'base.html' %}
{% block content %}
    <div class="product-detail">
        <h1>{{ produs.nume }}</h1>
        <p>{{ produs.descriere }}</p>
        <p><strong>Pre»õ:</strong> {{ produs.pret }} RON</p>
        <p><strong>Categorie:</strong> {{ produs.category.name }}</p>

        <div class="product-images">
            {% if imagini_produs %}
                <div class="image-slider">
                    <div class="slider-wrapper">
                        {% for imagine in imagini_produs %}
                            <div>
                                <img src="{{ imagine.imagine.url }}" alt="Imagine suplimentarƒÉ {{ produs.nume }}" width="300">
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% else %}
                <p>Nu sunt imagini suplimentare pentru acest produs.</p>
            {% endif %}
        </div>

        <button id="favorite-btn" data-product-id="{{ produs.id }}">
            ü§ç AdaugƒÉ la favorite
        </button>

        <p><a href="/produse/">√énapoi la produse</a></p>

    </div>


<script>
    document.getElementById("favorite-btn").addEventListener("click", function () {
        let productId = this.getAttribute("data-product-id");
        let button = this;

        fetch(`/favorite/${productId}/`, {
            method: "GET",
            headers: { "X-Requested-With": "XMLHttpRequest" }
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === "added") {
                button.textContent = "‚ù§Ô∏è √én favorite";
                button.classList.add("favorited");
            } else {
                button.textContent = "ü§ç AdaugƒÉ la favorite";
                button.classList.remove("favorited");
            }
        })
    });
</script>


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/slick-carousel/slick/slick.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel/slick/slick.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel/slick/slick-theme.css"/>


{% endblock %}
